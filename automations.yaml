# Automations go here...
- alias: Tim Fan Speed (Fan to Slider)
  trigger:
    - platform: template
      value_template: '{{states.fan.tim_bedroom.attributes.speed != 0}}'
  action:
     service: input_number.set_value
     data_template:
       entity_id: input_number.tim_fan_speed
       value: '{{ state.attributes.speed }}'

- alias: Tim Fan Speed (Slider to Fan)
  trigger:
    - platform: numeric_state
      entity_id: input_number.tim_fan_speed
      above: 0
  action:
     service: fan.set_speed
     data_template:
       entity_id: input_number.tim_fan_speed
       value: '{{ state_attr(fan.tim_bedroom, speed) }}'

- alias: Arm alarm when family away
  trigger:
    - platform: state
      entity_id: group.family
      from: "home"
  action:
    - service: alarm_control_panel.alarm_arm_away
      data:
        entity_id: alarm_control_panel.ha_alarm
        code: !secret alarm_code

- alias: Disarm alarm when family home
  trigger:
    - platform: state
      entity_id: group.family
      to: "home"
  action:
    - service:  alarm_control_panel.alarm_disarm
      data:
        entity_id: alarm_control_panel.ha_alarm
        code: !secret alarm_code

- alias: Notify motion when alarm armed
  trigger:
    - platform: state
      entity_id:  binary_sensor.media_room_motion
      to: "on"
    - platform:  state
      entity_id: binary_sensor.lounge_room_motion
      to: "on"
    - platform: state
      entity_id:  binary_sensor.garage_motion
      to: "on"
    - platform: state
      entity_id: binary_sensor.front_door_motion
      to: "on"
    - platform: state
      entity_id: binary_sensor.back_yard_motion
      to: "on"
  condition:
    - condition: state
      entity_id:  alarm_control_panel.ha_alarm
      state: "armed_away"
  action:
    - service: notify.ios_gareth_iphone_beta
      data:
        title: "Warning: Motion Detected"
        message: "Motion has been detected by sensor {{ trigger.from_state.friendly_name }}"